
          let data = JSON.parse(e.data);
          let msg_wraper = document.getElementById("staff_msg");
          msg_wraper.innerHTML = "";
          let msg_container = "";
          console.log(data)
          data.data.forEach(function(datum) {
            if(datum.sent_by === false){
              msg_container = `<div class="text-muted d-flex justify-content-end"><small class="broc_chat_room_message_username font-weight-bold text-dark">${datum.To}</small></div><div class="card card-body font-weight-normal py-2 my-1 broc_chat_room_message_text mb-4 ml-auto" style="border-radius: 13px; width: fit-content; background: #000000; color: #ffffff;">${datum.Message}</div>`;
            }else{
              msg_container = `<div class="text-muted d-flex"><small class="broc_chat_room_message_username font-weight-bold text-dark">${datum.From}</small></div><div class="card card-body font-weight-normal py-2 my-1 broc_chat_room_message_text mb-4" style="border-radius: 13px; width: fit-content; background: #9dffde;">${datum.Message}</div>`;
            }
            let new_element = document.createElement('div');
            new_element.innerHTML = msg_container;
            msg_wraper.appendChild(new_element);
          });
          let staff_broc_chat_room_messages = document.getElementById("staff_broc_chat_room_messages");
          staff_broc_chat_room_messages.scrollTop = staff_broc_chat_room_messages.scrollHeight;
          document.getElementById('staff_broc_chat_room_message_field').value = '';







          // for blocking block_countries


          
    function ajax_blocked_countries(){
        var data = [];
        $("#wrapper_countries .selected-wrapper .selected").each(function() {
            data.push($(this).attr("data-value"));
        });

        $.ajax({
        method:'POST',
        url: " ",
        data:{
                'countries':data,
                'room': {{room_data.id}},
                'csrfmiddlewaretoken':"{{csrf_token}}",
            },
            success:function(){
                document.getElementById('save_blocked_countries').style.display = 'block'
            }
    })
    }

    function ajax_blocked_US(){
        var data = [];
        $("#wrapper_US .selected-wrapper .selected").each(function() {
            data.push($(this).attr("data-value"));
        });

        $.ajax({
        method:'POST',
        url: " ",
        data:{
                'states':data,
                'room': {{room_data.id}},
                'csrfmiddlewaretoken':"{{csrf_token}}",
            },
            success:function(){
                document.getElementById('save_blocked_US').style.display = 'block'
            }
    })
    }

    function ajax_blocked_Canada(){
        var data = [];
        $("#wrapper_Canada .selected-wrapper .selected").each(function() {
            data.push($(this).attr("data-value"));
        });

        $.ajax({
        method:'POST',
        url: " ",
        data:{
                'providences':data,
                'room': {{room_data.id}},
                'csrfmiddlewaretoken':"{{csrf_token}}",
            },
            success:function(){
                document.getElementById('save_blocked_Canada').style.display = 'block'
            }
    })
    }





// check if a room is online

    function room_online() {
        $.ajax({
            method:'POST',
            url: "room/go_online/",
            data:{
                    'room': {{room_data.id}},
                    'csrfmiddlewaretoken':"{{csrf_token}}",
                },
                success:function(){
                    document.getElementById('save_offline').style.display = 'none'
                }
        })
    }

    function room_offline() {
        $.ajax({
            method:'POST',
            url: "room/go_offline/",
            data:{
                    'room': {{room_data.id}},
                    'csrfmiddlewaretoken':"{{csrf_token}}",
                },
                success:function(){
                    document.getElementById('save_offline').style.display = 'none'
                }
        })
    }




// AJAX GENERATE IDS


function generate_IDs()
{
$.ajax({
    method:'GET',
    url: "/staff/getPendingBroadcasters/",
        success:function(data){

          var user_details = data.data;
          let total_ID_checks = document.getElementById("id_check_len");
          let table = document.getElementById("table_body");
          table.innerHTML = "";
          total_ID_checks.textContent = user_details.length;
            console.log(user_details.length)
            for(var i=0;i<user_details.length;i++){

               
               

                    // create a new table row
                    let newRow = document.createElement("tr");
                    // create cells containing data
                    let firstNameCell = document.createElement("td");
                    firstNameCell.textContent = user_details[i].Real_Name;
                    let lastNameCell = document.createElement("td");
            
                    let birthDateCell = document.createElement("td");
                    birthDateCell.textContent = user_details[i].Birth_Date;
                    // add cells to row
                    newRow.appendChild(firstNameCell);
                    newRow.appendChild(lastNameCell);
                    newRow.appendChild(birthDateCell);
                    // create the modal
                    let modalCell = document.createElement("td");

                    modalCell.innerHTML = `
                    <button type="button" class="btn btn-primary openmodal" data-toggle="modal" data-target="#info-${user_details[i].User}" style="border:none;outline:none;color:blue">
                    <span class="text-white">Show</span>
                      </button>
                      
                      <!-- Modal -->
                      <div class="modal fade" id="info-${user_details[i].User}" tabindex="-1" role="dialog" aria-labelledby="pic-${user_details[i].User}" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">${user_details[i].Real_Name}'s Information</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body">
                                <div class="card" style="width: 18rem;">
                                    <img class="img-thumbnail" src="${user_details[i].Image}"/>
                                    <div class="card-body">
                                        <h5 class="card-title">${user_details[i].User}</h5>
                                        <p> ${user_details[i].Birth_Date}</p>
            
                                    </div> 
                                </div>
            
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Decline</button>
                                <button type="button" data-user-id="${user_details[i].User}" data-dismiss="modal" class="btn btn-success btn_approve_broadcaster">Approve</button>
                                
                            </div>
                          </div>
                        </div>
                      </div>
                    `
                    newRow.appendChild(modalCell);
                    // add the new row to the table
                    table.appendChild(newRow);


            }




//      ID CHECKING CODE 

 let table = document.getElementById("table_body");
  let total_ID_checks = document.getElementById("id_check_len");
  $(function() {
    $('#decline_modal').modal('hide')
   
 

    
      // Define the click event function
      function approveBroadcasterClick(event) {
        var button = event.target;
        var userId = button.getAttribute('data-user-id');
        var modal = document.getElementById('info-' + userId);
        var parentElement = modal.parentNode;
        parentElement.removeChild(modal);
  
        parentElement.closest('tr').remove(); 
        check_modal();
        var formData = new FormData();
        formData.append('Status', 'Broadcaster');
        formData.append('user_id', userId);
      
        // Convert the FormData to a JSON object
        var jsonData = {};
        formData.forEach((value, key) => {
          jsonData[key] = value;
        });
      
        // Convert the JSON object to a string
        var jsonString = JSON.stringify(jsonData);
      
        // Send the data via WebSocket using socket.send
        socket.send(jsonString);
       
      }
    


  function generate_IDs()
  {
  $.ajax({
      method:'GET',
      url: "/staff/getPendingBroadcasters/",
          success:function(data){

          
            var user_details = data.data;
            let total_ID_checks = document.getElementById("id_check_len");
            
            table.innerHTML = "";
            total_ID_checks.textContent = user_details.length;
              console.log(user_details.length)

              for(var i=0;i<user_details.length;i++){
  
                 
                      
  
                      // create a new table row
                      let newRow = document.createElement("tr");
                      // create cells containing data
                      let firstNameCell = document.createElement("td");
                      firstNameCell.textContent = user_details[i].Real_Name;
                      let lastNameCell = document.createElement("td");
              
                      let birthDateCell = document.createElement("td");
                      birthDateCell.textContent = user_details[i].Birth_Date;
                      // add cells to row
                      newRow.appendChild(firstNameCell);
                      newRow.appendChild(lastNameCell);
                      newRow.appendChild(birthDateCell);
                      // create the modal
                      let modalCell = document.createElement("td");
  
                      modalCell.innerHTML = `
                      <button type="button" class="btn btn-primary openmodal" data-toggle="modal" data-target="#info-${user_details[i].User}" style="border:none;outline:none;color:blue">
                      <span class="text-white">Show</span>
                        </button>
                        
                        <!-- Modal -->
                        <div class="modal fade" id="info-${user_details[i].User}" tabindex="-1" role="dialog" aria-labelledby="pic-${user_details[i].User}" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">${user_details[i].Real_Name}'s Information</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body">
                                  <div class="card" style="width: 18rem;">
                                      <img class="img-thumbnail" src="${user_details[i].Image}"/>
                                      <div class="card-body">
                                          <h5 class="card-title">${user_details[i].User}</h5>
                                          <p> ${user_details[i].Birth_Date}</p>
              
                                      </div> 
                                  </div>
              
                              <div class="modal-footer">
                                  <button type="button" onclick="Decline_broadcaster(${user_details[i].User})" class="btn btn-danger" data-dismiss="modal">Decline</button>
                                  <button type="button" data-user-id="${user_details[i].User}" data-dismiss="modal" class="btn btn-success btn_approve_broadcaster">Approve</button>
                                  
                              </div>
                            </div>
                          </div>
                        </div>
                      `
                      newRow.appendChild(modalCell);
                      // add the new row to the table
                      table.appendChild(newRow);
  
                     
              }
              let btn_approve_broadcaster = document.querySelectorAll('.btn_approve_broadcaster');
              btn_approve_broadcaster.forEach(function (button) {
                // Add the 'click' event handler
                button.addEventListener('click', approveBroadcasterClick);
              });

  
        
 

          },
          error: function(error){
            console.log(errors.responseText)
          }
  });
}

setInterval(generate_IDs(),2000);

      let protocol = "";
      if(window.location.protocol == "http:"){
          protocol = "ws";
      }else if(window.location.protocol == "https:"){
          protocol = "wss";
      }

      const socket = new WebSocket(`${protocol}://${window.location.host}/ws/staff/`);

      socket.onopen = function(event) {
        console.log('WebSocket connection established');  
        
       
      };

      // Create a map to keep track of existing rows in the table
const tableRowsMap = {};

// Function to update or add a row to the table
function updateOrAddRow(user) {
  let newRow = tableRowsMap[user.id];

  // If the row already exists, update its content
  if (newRow) {
    newRow.cells[0].textContent = user.name;
    newRow.cells[1].textContent = user.Birth_Date;
    // Update other cells if needed
  } else {
    // If the row doesn't exist, create a new row
    newRow = document.createElement("tr");
    // create cells containing data
    let firstNameCell = document.createElement("td");
    firstNameCell.textContent = user.name;
    let birthDateCell = document.createElement("td");
    birthDateCell.textContent = user.Birth_Date;
    // add cells to row
    newRow.appendChild(firstNameCell);
    newRow.appendChild(birthDateCell);
    // Create other cells if needed

    // Store the new row in the map
    tableRowsMap[user.id] = newRow;
  }

  // Add the new row to the table
  table.appendChild(newRow);
}

// Function to remove rows from the table for users not present in the new data
function removeRowsNotInData(data) {
  for (const userId in tableRowsMap) {
    if (!data.find(user => user.id === userId)) {
      // The user is not present in the new data, remove the row from the table
      const rowToRemove = tableRowsMap[userId];
      rowToRemove.remove();
      // Delete the row entry from the map
      delete tableRowsMap[userId];
    }
  }
}


socket.onmessage = function(event) {
  let data = JSON.parse(event.data);
 

  if (data && data.length > 0) {
    total_ID_checks.textContent = data.length;

    // Update or add rows for each user in the new data
    data.forEach(user => {
      updateOrAddRow(user);
    });

    // Remove rows for users not present in the new data
    removeRowsNotInData(data);
  } else {
    total_ID_checks.textContent = 0;
  }
};
   



      socket.onerror = function(event) {
        console.error('WebSocket error:', event);
      };

      socket.onclose = function(event) {
        
        console.log('WebSocket connection closed');
      };


    });
  </script>


<script type="text/javascript">

    function Decline_broadcaster(id){

      $('#decline_modal').modal('show')

      let userid = document.getElementById('user_id');
     userid.value = id;



    }
    
function dismiss_decline_modal(){
  $('#decline_modal').modal('hide');
}

    function send_decline_message() {
      let decline_message = document.getElementById('decline_message');
      $('#decline_modal').modal('hide')
      var modal = document.getElementById('info-' + document.getElementById('user_id').value);
      var parentElement = modal.parentNode;
      parentElement.removeChild(modal);
      parentElement.closest('tr').remove(); 
      let rowCount = table.querySelectorAll('tr').length;
      total_ID_checks.textContent = rowCount;
      check_modal();

      $.ajax({
          method:'POST',
          url: "/staff/idStatus/",
          mimeType:"multipart/form-data",
          data:{  
                  'Status' : 'Decline',
                  'User_id' : document.getElementById('user_id').value,
                  'message': decline_message.value,
                  'csrfmiddlewaretoken':"{{csrf_token}}",
              },
              'dataType': 'json',
              success:function(){
                }
      })
    }
    
    {% comment %} Approve broadcaster {% endcomment %}
    

      


function check_modal()
{
    var modal = $('.modal');
        // Now you can use the firstModal variable as needed

        if (modal)
        {
        setTimeout(function(){
          var firstModal = $('#table_body');
          var modalsInsideTableBody = firstModal.find('.openmodal').first();

          if (firstModal.find('.openmodal').length > 0) {
            // Modals exist inside the table_body
            // You can perform actions here if needed 
            modalsInsideTableBody.click();
          } else {
            // There are no modals inside the table_body
            // You can handle this case if needed
          }
        }, 1000);
      }
    
}



//NAV


<div class="start container-fluid" style="color:black; padding:0px;">


    <div aria-live="polite" aria-atomic="true" class="position-relative">

        <div id="toast-container" data-bs-animation="" style="z-index: 2000;" class="toast-container position-fixed end-0 p-3">
          {% for message in messages %}
      
          <div class="toast show position-fixed top-25 end-0 mr-5 fade bg-{{message.tags}}" role="alert" aria-live="assertive" aria-atomic="true">
           <div class="toast-header">
            <img src="{% static 'images/logo/small_green_logo.png' %}" id="privatevibezlogo" width="30px" height="30px" class="rounded me-2 d-none" alt="...">
             <strong class="me-auto">Notification</strong>
             <!--<small class="text-muted">just now</small>-->
             <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
           </div>
           <div class="toast-body fs-2">
             {{ message | safe }}
           </div>
         </div>
      
      {% endfor %}
        </div>
      </div>

    {% if not request.user.is_authenticated %} 
        <a href="#" data-toggle="modal" data-target="#registration_modal" style="color:black;text-decoration:none;">
            <p class="fs-2 font-weight-bold" style="color:#6cc6ba;">
                Sign Up to  enjoy Vibrations
                <span><i class="icofont-sign-in"></i></span>
            </p> 
        </a>    
    {% endif %}

    {% if request.user.is_authenticated %} 
        {% if user_status == "User" %}

            <button class="border-0 bg-transparent w-100" onclick="window.location.href='{% url 'registration_broadcaster' %}'"  class="mt-0" style="color:black;text-decoration:none; text-shadow:black !important;">
                <p class="fs-2 font-weight-bold" style="color:#6cc6ba;">
                    BROADCAST YOURSELF - GO NOW 
                    <span><i class="icofont-camera fs-1" style="color:#6cc6ba;"></i></span>
                </p> 
            </button>
        {% endif %}

        {% if user_status == "Pending_Broadcaster" %}
                <p class="fs-2 font-weight-bold" style="color:#6cc6ba;">
                    We are still looking through your Information 
                    <span><i class="icofont-look" style="color:#6cc6ba;"></i></span>
                </p> 
        {% endif %}

        {% if user_status == "Broadcaster" %}
            <p>
                <button style="color:black;text-decoration:none;" class=" btn-transparent bg-transparent  border-0 rounded-3" style="box-shadow:0px; outline:0px;" data-toggle="modal" data-target="#private_chat_invites_modal">

                    <span class="fs-2 font-weight-bold" style="color:#6cc6ba;">
                        Number of Invitees : {{all_private_chat_invitees.count}} | Pending request : {{pending_private_chat_invitees}}
                    </span>

                <span>  
                    <i class="icofont-ui-message h3" style="color:#6cc6ba;"></i>
                </span>
                </button>
            </p> 
        {% endif %}

        {% if user_status == "STAFF" %}
            <a href="/staff/" style="color:black;text-decoration:none;">
                <p>
                    Get Back To Work 
                    <span><i class="icofont-ui-computer" style="color:#6cc6ba;"></i></span>
                </p> 
            </a>
        {% endif %}

    {% endif %}
</div>



{% comment %} MODAL FOR PRIVATE INVITES {% endcomment %}

<div class="modal fade" id="private_chat_invites_modal" tabindex="-1" role="dialog" aria-labelledby="private_chat_invites_modal" aria-hidden="true">
    <div class="modal-dialog"  role="document">
      <div class="modal-content" >
        <div class="modal-header">
          <h5 class="modal-title font-weight-bold fs-2" id="exampleModalLabel">Private Chat invites</h5>
          <button type="button" class="close fs-1" data-dismiss="modal" aria-label="Close">
            <span class="fs-1" aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
      
            <table class="table table-striped">
                <thead>
                  <tr>
                    <th scope="col" class="fs-2">Name</th>
                    <th scope="col"></th>
                  </tr>
                </thead>
                <tbody id="invitees" class="fs-2">

                </tbody>
              </table>


        </div>
        <div class="modal-footer">

        </div>
      </div>
    </div>
  </div>


<!-- Login Modal-->

<div class="modal fade" id="login_modal" tabindex="-1" role="dialog" aria-labelledby="login_modal_label" aria-hidden="true">
    <div class="modal-dialog  modal-dialog-centered" role="document">
      <div class="modal-content" style="background-image: url('{% static 'images/loginimg1.jpg' %}');  background-size: cover; background-position: center; ">
        <div class="modal-header">
          <h5 class="modal-title display-4 font-weight-bold text-white text-center w-100" id="login_modal_label">Login</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span class="fs-1" style="color:#1db9a7" aria-hidden="true">&times;</span>
          </button>
        </div>
        <form action="/accounts/login/" method="POST">
            {% csrf_token %}

            {% block user_login_credentials %}
            <div class="modal-body">
                <div class="col-8 h-50 m-auto">
                <div class="form-group">
                    <label class="text-white" style="font-size:2rem" for="username">username</label>
                    <input type="type" style="font-size:2rem" class="form-control h-50" id="username" name="username" aria-describedby="emailHelp" >
                </div>
                <div class="form-group">
                    <label class="text-white" style="font-size:2rem" for="password">password</label>
                    <input type="password" style="font-size:2rem" class="form-control" id="password" name="password" >
                </div>
                </div>
                <div class="small text-center">
                    <p class="text-white" style="font-size:2rem">New to Private vibez? <a href='/accounts/signup/' type="button" class="btn text-warning" style="font-size:2.3rem"  onclick='change_signUp()'> Sign up now.</a></p>
                </div>
            </div>
            {% endblock user_login_credentials %}


            <div class="modal-footer container-fluid" style="height:100px">
                <div class="col-2 p-0">
                </div>
                <div class="col-2 p-0">
                    <button type="submit" style="font-size:2rem" class="btn btn-primary font-weight-bold w-100" id="btn_submit_store">Login</button>
                </div>
            </div>
        </form>
      </div>
    </div>
</div>

  <!-- Registration Modal-->
  {% block registration_modal %}
<div class="modal fade" id="registration_modal" tabindex="-1" role="dialog" aria-labelledby="registration_modal_label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered"  role="document">
      <div class="modal-content" style="background-image: url('{% static 'images/loginimg1.jpg' %}');  background-size: cover; background-position: center; ">
        <div class="modal-header">
          <h5 class="modal-title font-weight-bold text-white w-100 text-center fs-1" id="registration_modal_label">Sign Up</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span class="fs-1" style="color:#1db9a7" aria-hidden="true">&times;</span>
          </button>
        </div>

                              {% comment %} REGISTRATION FORM {% endcomment %}

        <form action="/accounts/signup/" method="POST">
            
            {% csrf_token %}
            <div class="modal-body">
                <div class="col-8 h-50 m-auto">
                    <div class="form-group">
                        <label class="text-white" style="font-size:2rem" for="username">Username</label>
                        <input type="type" class="form-control" style="font-size:2rem" id="register_username" name="username" aria-describedby="emailHelp" placeholder="Username">
                    </div>
                    <div class="form-group">
                        <label class="text-white" style="font-size:2rem" for="email">Email address</label>
                        <input type="email" class="form-control" style="font-size:2rem" id="email" name="email" aria-describedby="emailHelp" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <label class="text-white" style="font-size:2rem" for="password1">Password</label>
                        <input type="password" class="form-control" style="font-size:2rem" id="password1" name="password1" placeholder="Password">
                    </div>
                    <div class="form-group">
                        <label class="text-white" style="font-size:2rem" for="password2">Confirm password</label>
                        <input type="password" class="form-control" style="font-size:2rem" id="password2" name="password2" placeholder="Confirm password">
                    </div>
                </div>

            </div>
            <div class="small text-center">
            <p class="text-white" style="font-size:2rem" >Not new to Private Vibez? <a href="/accounts/login/" style="font-size:2.3rem" type="button" class="btn text-warning"> Sign in now.</a></p>
            </div>

            <div class="modal-footer">
            <button type="submit" style="font-size:2rem" class="btn btn-primary">Register</button>
            </div>
        </form>
      </div>
    </div>
  </div>
  {% endblock registration_modal %}
<!-- Modal -->

<!--
<div class="modal fade" id="Profile" tabindex="-1" role="dialog" aria-labelledby="Profile_Label" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="Profile_Label">Profile</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" id="Profile_Image-tab" data-toggle="tab" href="#Profile_Image" role="tab" aria-controls="Profile_Image" aria-selected="true">Profile Image</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="Bio-tab" data-toggle="tab" href="#Bio" role="tab" aria-controls="Bio" aria-selected="false">Bio</a>
                </li>
            </ul>  
            <div class="tab-content" id="myTabContent">

                <div class="tab-pane fade show active" id="Profile_Image" role="tabpanel" aria-labelledby="Profile_Image-tab">
                    
                    <form method="POST" enctype="multipart/form-data" action="{% url 'Profile_Pic' %}"
                    {% csrf_token %}
                    <div class="row">
                        <div class="">
                            {% if user_datas.Image %}
                            <img src="{{user_datas.Image}}" alt="profile_picture" class="img-responsive">
                            {% endif %}
                        </div>
                        <div class="">
                            <span class="">{{user_datas.User.username}}</span>
                        </div>
                    </div>
                </div>
            </form>


                {% block broadcast_info %}

                <div class="tab-pane fade" id="Bio" role="tabpanel" aria-labelledby="Bio-tab">
                    <div class="form-outline mb-4">
                        <input type="text" value="{{user_data.Real_Name}}" class="form-control" id="update_Real_Name" aria-label="update_Real_Name">  
                        <label class="form-label" for="update_Real_Name">Real Name</label>
                      </div>
                      <div class="form-outline mb-4">
                        <input type="number" value="{{user_data.Age}}" class="form-control" id="update_Age" aria-label="update_Age" >  
                        <label class="form-label" for="Age">Age</label>
                      </div>
                      <div class="form-outline mb-4">
                        <input type="text" value="{{user_data.I_Am}}" class="form-control" id="update_I_Am" aria-label="update_I_Am">  
                        <label class="form-label" for="Interested_In">You are</label>
                      </div>
                      <div class="form-outline mb-4">
                        <input type="text" value="{{user_data.Interested_In}}" class="form-control" id="update_Interested_In" aria-label="Interested_In">  
                        <label class="form-label" for="Interested_In">Interested In</label>
                      </div>
                      <div class="form-outline mb-4">
                        <input type="text" value="{{user_data.Location}}" class="form-control" id="update_Location" aria-label="update_Location" >  
                        <label class="form-label" for="update_Location">Location</label>
                      </div>
                      <div class="form-outline mb-4">
                        <input type="text" value="{{user_data.Language}}" class="form-control" id="update_Language" aria-label="update_Language" >  
                        <label class="form-label" for="update_Language">Language</label>
                      </div>
                      <div class="form-outline mb-4">
                        <input type="text" value="{{user_data.Body_Type}}" class="form-control" id="update_Body_Type" aria-label="update_Body_Type" >  
                        <label class="form-label" for="update_Body_Type">Body Type</label>
                    </div>
                      <div class="modal-footer">
                        <button type="button" id="bio_closeButton" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" onclick="Save_Bio_nav()">Save changes</button>
                      </div>

                </div>
                {% endblock broadcast_info %}

            </div>     
        </div>
      </div>
    </div>
  </div>
  <!-- Modal --> 



  <!-- Modal for Messages -->
<div class="modal fade" id="Messages" tabindex="-1" role="dialog" aria-labelledby="Profile_Label" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="Profile_Label">Messages</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
         

        <div class="d-flex flex-row">

            
            <div class="col-3">
                Mikey
            </div>

            <div class="col-8">
                yo
            </div>
        
        </div>


        </div>
      </div>
    </div>
  </div>
  
  {% comment %} modal for settings {% endcomment %}


<div class="modal fade" id="Settings" tabindex="-1" role="dialog" aria-labelledby="Settings_Label" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title" id="Settings_Label">Settings</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">

            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" id="Vibez_tab-tab" data-toggle="tab" href="#Vibez_tab" role="tab" aria-controls="Profile_Image" aria-selected="true">Vibez</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="Chat-tab" data-toggle="tab" href="#Chat" role="tab" aria-controls="Chat" aria-selected="false">Chat</a>
                </li>
            </ul> 

            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="Vibez_tab" role="tabpanel" aria-labelledby="Vibez_tab-tab">
                    
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="card" style="background-color:lightcoral;">
                               
                                <div class="card-body">
                                    <h5 class="card-title">MMM Button</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">Soft Vibez</h6>
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Price</label>
                                        <input type="number" class="form-control" id="Price_MMM_button" aria-describedby="emailHelp" value="{{room_data.Price_MMM_button}}">
                                        <small id="emailHelp" class="form-text text-muted">By Vibez.</small>
                                    </div>                    
                                    <div class="form-group">
                                        <label for="">Feature</label>

                                        <select value="{{room_data.Price_MMM_button}}" class="form-control" id="Feature_MMM_button">

                                            <option {% if room_data.Feature_MMM_button and room_data.Feature_MMM_button == "v" %}
                                             selected{% endif %} value="v"
                                             >Vibrate</option>

                                            <option
                                             {% if room_data.Feature_MMM_button and room_data.Feature_MMM_button == "r" %}
                                              selected{% endif %} value="r"
                                              >Rotate</option>

                                            <option 
                                            {% if room_data.Feature_MMM_button and room_data.Feature_MMM_button == "p" %}
                                             selected{% endif %}
                                              value="p">Pump</option>

                                            <option
                                             {% if room_data.Feature_MMM_button and room_data.Feature_MMM_button == "t" %}
                                              selected{% endif %}
                                               value="t">Thrusting</option>

                                            <option
                                             {% if room_data.Feature_MMM_button and room_data.Feature_MMM_button == "f" %} 
                                             selected
                                             {% endif %} 
                                             value="f">Fingering</option>

                                            <option 
                                            {% if room_data.Feature_MMM_button and room_data.Feature_MMM_button == "s" %}
                                             selected{% endif %}
                                              value="s">
                                              Suction</option>

                                        </select>
                                    </div>                    
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Duration</label>
                                        <input type="number" class="form-control" id="Duration_MMM_button" aria-describedby="emailHelp" value="{{room_data.Duration_MMM_button}}">
                                        <small id="emailHelp" class="form-text text-muted">in Min.</small>
                                    </div>                    
                                    
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Strength</label>
                                        <input type="text" class="form-control" id="Strength_MMM_button" aria-describedby="emailHelp" value="{{room_data.Strength_MMM_button}}">
                                    </div>  
                                </div>
                            </div>   
                        </div>               
                        <div class="col-sm-4">
                            <div class="card" style="background-color:lightsalmon;">
                                <div class="card-body">
                                    <h5 class="card-title">OH Button</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">Mid Vibez button</h6>
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Price</label>
                                        <input type="number" class="form-control" id="Price_OH_button" aria-describedby="emailHelp" value="{{room_data.Price_OH_button}}">
                                        <small id="emailHelp" class="form-text text-muted">By Vibez.</small>
                                    </div>  
                                    
                                    <div class="form-group">
                                        <label for="">Feature</label>

                                        <select class="form-control" id="Feature_OH_button">

                                            <option {% if room_data.Feature_OH_button and room_data.Feature_OH_button == "v" %} selected{% endif %}  value="v">Vibrate</option>

                                            <option
                                            {% if room_data.Feature_OH_button and room_data.Feature_OH_button == "r" %} selected{% endif %}  
                                             value="r">
                                             Rotate</option>

                                            <option
                                            {% if room_data.Feature_OH_button and room_data.Feature_OH_button == "p" %} selected{% endif %}  
                                            value="p">Pump</option>

                                            <option
                                            {% if room_data.Feature_OH_button and room_data.Feature_OH_button == "t" %} selected{% endif %}  

                                            value="t">Thrusting</option>

                                            <option
                                            {% if room_data.Feature_OH_button and room_data.Feature_OH_button == "f" %} selected{% endif %} 

                                            value="f">Fingering</option>

                                            <option
                                            {% if room_data.Feature_OH_button and room_data.Feature_OH_button == "s" %} selected{% endif %}  
                                            value="s">Suction</option>

                                        </select>
                                    </div> 
                                                     
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Duration</label>
                                        <input type="number" class="form-control" id="Duration_OH_button" aria-describedby="emailHelp" value="{{room_data.Duration_OH_button}}">
                                        <small id="emailHelp" class="form-text text-muted">in Min.</small>
                                    </div>                    
                                    
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Strength</label>
                                        <input type="text" class="form-control" id="Strength_OH_button" aria-describedby="emailHelp" value="{{room_data.Strength_OH_button}}">
                                    </div>  
                                </div>
                            </div>                  
                        </div> 
                        <div class="col-sm-4">
                            <div class="card" style="background-color:lightgreen;">
                                <div class="card-body">
                                    <h5 class="card-title">OHYes Button</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">High Vibez button</h6>
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Price</label>
                                        <input type="number" class="form-control" id="Price_OHYes_button" aria-describedby="emailHelp" value="{{room_data.Price_OHYes_button}}">
                                        <small id="emailHelp" class="form-text text-muted">By Vibez.</small>
                                    </div> 

                                    <div class="form-group">
                                        <label for="">Feature</label>

                                        <select class="form-control" id="Feature_OHYes_button">
                                            <option
                                            {% if room_data.Feature_OHYes_button and room_data.Feature_OHYes_button == "v" %}
                                             selected{% endif %}  
                                             
                                            value="v">Vibrate</option>

                                            <option
                                            {% if room_data.Feature_OHYes_button and room_data.Feature_OHYes_button == "r" %}
                                            selected
                                            {% endif %}
                                            value="r">Rotate</option>

                                            <option
                                            {% if room_data.Feature_OHYes_button and room_data.Feature_OHYes_button == "p" %}
                                            selected
                                            {% endif %}
                                            value="p">Pump</option>

                                            <option
                                            {% if room_data.Feature_OHYes_button and room_data.Feature_OHYes_button == "t" %}
                                            selected
                                            {% endif %}
                                            value="t">Thrusting</option>

                                            <option
                                            {% if room_data.Feature_OHYes_button and room_data.Feature_OHYes_button == "f" %}
                                            selected
                                            {% endif %}
                                            value="f">Fingering</option>

                                            <option
                                            {% if room_data.Feature_OHYes_button and room_data.Feature_OHYes_button == "s" %}
                                            selected
                                            {% endif %}
                                            value="s">Suction</option>
                                        </select>
                                    </div>  

                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Duration</label>
                                        <input type="number" class="form-control" id="Duration_OHYes_button" aria-describedby="emailHelp" value="{{room_data.Duration_OHYes_button}}">
                                        <small id="emailHelp" class="form-text text-muted">in Min.</small>
                                    </div>                    
                                    
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Strength</label>
                                        <input type="text" class="form-control" id="Strength_OHYes_button" aria-describedby="emailHelp" value="{{room_data.Strength_OHYes_button}}">
                                    </div>  
                                </div>
                            </div>                  
                        </div> 
    
                        <button class="mt-3 display-3 btn btn-transparent" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                            More Info
                          </button>
                        </p>

                        <div class="collapse " id="collapseExample">
                          <div class="card card-body">
                            set strength in this format. 
                            example: 5;10;20
                            separate with semicolon.
                            highest strength is 20.
                          </div>
                        </div>
                    </div> 

                    <div class="modal-footer">

                        <button type="button" id="Settings_close" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>

                
                </div>

            </div>     
        </div>
      </div>
    </div>
  </div>
    

    show_itemAvailedInPublicChat(room,user_data,item)


    <div class="text-muted d-flex justify-content-end">
      <small class="public_chat_room_message_username font-weight-bold text-dark">{{ item.User }}</small>
  </div>

  <div class="card card-body py-2 my-1 public_chat_room_message_text mb-4 ml-auto" style="border-radius: 13px; width: fit-content; background: #000000; color: #ffffff;">

      {{ item.Item }}
      
                                    </div>





      <form class="d-flex flex-column justify-content-center gap-2" method="POST">
        <label for="email" class="fs-4">Email</label>
        <input class="fs-4" id="promotion_email">
        <label for="email" class="fs-4">Promotion code</label>
        <select name="promotion">
          {% for promotion in promotions %}
          <option value="{{promotion.id}}">{{promotion.Promotion_Code}}</option>
            {% endfor %}
        </select>
      
        </select>
        <button class="btn btn-primary fs-4" onclick="send_promotion()" type="submit">Send</button>
      </form>




              invitees = private_room_manager.Invitee_relationships.all()
        fan_list = []
        
        for fan in invitees:
            if fan.Is_Accepted == True:
                print(fan,flush=True)
                fan_list.append({
                    'user_id': fan.Invitee.id,
                    'name': fan.Invitee.username,
                })